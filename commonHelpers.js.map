{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/bi_x-octagon.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\n\nexport async function searchImages(searchTerm, page, perPage = 15) {\n    const API_KEY = '42541165-a3d46185342d32ff55345145c';\n\n    try {\n        const response = await axios.get(`${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(searchTerm)}&page=${page}&per_page=${perPage}`);\n        return response.data.hits;\n    } catch (error) {\n        throw new Error('Failed to fetch images from Pixabay API');\n    }\n}","export default \"__VITE_ASSET__3108d0c6__\"","import SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport Error from '../img/bi_x-octagon.svg';\n\n\n\n\nexport function clearGallery() {\n\tconst gallery = document.getElementById('.gallery');\n\tgallery.innerHTML = '';\n}\n\n\nexport function displayImages(images) {\n\tconst gallery = document.querySelector('.gallery');\n\tconst markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n\t\t`<li class=\"gallery-item\"> \n\t\t<div class=\"gallery-card\">\n\t\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n\t\t\t\t\t\t</a>\n            <div class=\"image-details\">\n                <p class=\"detail-value\"><b>Likes:</b> ${likes}</p>\n                <p class=\"detail-value\"><b>Views:</b> ${views}</p>\n                <p class=\"detail-value\"><b>Comments:</b> ${comments}</p>\n                <p class=\"detail-value\"><b>Downloads:</b> ${downloads}</p>\n            </div>\n\t\t\t\t\t\t</div>\n        </li>`\n\t).join(\"\");\n\n\tgallery.insertAdjacentHTML(\"beforeend\", markup);\n\n\n\tconst lightbox = new SimpleLightbox('.gallery a', {\n\t\tcaptionsData: 'alt',\n\t\tcaptionDelay: 250,\n\t});\n\n}\n\nexport function displayErrorMessage(message) {\n\tiziToast.error({\n\t\ttitle: 'Error',\n\t\tmessage: message,\n\t\tposition: 'topCenter',\n\t\tclass: 'popup-message',\n\t\ttheme: 'dark',\n\t\tbackgroundColor: '#ef4040',\n\t\tmessageColor: '#fff',\n\t\tposition: 'topRight',\n\t\ttimeout: 3000,\n\t\ticonUrl: Error\n\t});\n}","'use strict';\nimport { searchImages } from './js/pixabay-api.js';\nimport { displayImages, clearGallery, displayErrorMessage } from './js/render-functions.js';\n\nimport SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\n\nimport iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\n\n\nconst formsubmit = document.querySelector('.form-submit');\nformsubmit.addEventListener('mouseover', function () {\n\tformsubmit.classList.add('hover-effect');\n});\n\nformsubmit.addEventListener('mouseout', function () {\n\tformsubmit.classList.remove('hover-effect');\n});\n\nlet searchTerm = '';\nlet page = 1;\nlet loadMoreBtn;\nlet loadingMoreSpan;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\tconst form = document.querySelector('.form');\n\tconst input = document.querySelector('.form-input');\n\tconst gallery = document.querySelector('.gallery');\n\tloadMoreBtn = document.querySelector('.loadmore');\n\tloadingMoreSpan = document.querySelector('.loading-more');\n\tconst lightbox = new SimpleLightbox('.gallery a', {\n\t\tcaptionsData: 'alt',\n\t\tcaptionDelay: 250,\n\t});\n\n\n\tform.addEventListener('submit', async (event) => {\n\t\tevent.preventDefault();\n\t\tgallery.innerHTML = null;\n\t\tsearchTerm = input.value.trim();\n\t\tconst spanLoader = document.querySelector('.loader');\n\t\tspanLoader.classList.add('loading');\n\t\tif (searchTerm === '') {\n\t\t\tdisplayErrorMessage('Please enter a search term.');\n\t\t\treturn;\n\t\t}\n\t\tpage = 1;\n\t\tawait searchAndDisplayImages();\n\t\tspanLoader.classList.remove('loading');\n\t});\n\n\tloadMoreBtn.addEventListener('click', async function () {\n\t\tpage++;\n\t\tloadMoreBtn.style.display = 'none';\n\t\tloadingMoreSpan.style.display = 'block';\n\n\t\tconst galleryItemHeight = getHeight();\n\n\t\tif (galleryItemHeight) {\n\t\t\twindow.scrollBy({\n\t\t\t\ttop: galleryItemHeight * 2,\n\t\t\t\tbehavior: 'smooth'\n\t\t\t});\n\t\t}\n\t\tawait searchAndDisplayImages(searchTerm);\n\n\t})\n\n\n\n\n\tgetHeight();\n});\n\nfunction getHeight() {\n\tconst galleryItem = document.querySelector('.gallery-item');\n\tif (galleryItem) {\n\t\tconst galleryItemHeight = galleryItem.getBoundingClientRect().height*2;\n\t\tconsole.log(galleryItemHeight);\n\t\treturn galleryItemHeight;\n\t}\n\treturn null;\n}\n\n\n\nasync function searchAndDisplayImages() {\n  try {\n    const images = await searchImages(searchTerm, page);\n    const totalHits = images.totalHits;\n    const totalImage = page * 15;\n    //console.log(totalImage);\n\t\t\n    if (images.length === 0) {\n      displayErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n      return;\n    }\n\n    if (totalImage >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      displayErrorMessage(\"We're sorry, but you've reached the end of search results.\");\n      console.log(images.length);\n\n      return;\n    }\n    displayImages(images);\n\t\t\n\t\t\n\n    if (images.length < 15) {\n      loadMoreBtn.style.display = 'none';\n      displayErrorMessage(\"We're sorry, but you've reached the end of search results.\");\n\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    displayErrorMessage('An error occurred while fetching data. Please try again later.');\n  } finally {\n    loadingMoreSpan.style.display = 'none';\n\t\t\n  }\n}"],"names":["BASE_URL","searchImages","searchTerm","page","perPage","API_KEY","axios","Error$1","displayImages","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","displayErrorMessage","message","iziToast","Error","formsubmit","loadMoreBtn","loadingMoreSpan","form","input","event","spanLoader","searchAndDisplayImages","galleryItemHeight","getHeight","galleryItem","totalHits","totalImage"],"mappings":"owBAGA,MAAMA,EAAW,2BAGV,eAAeC,EAAaC,EAAYC,EAAMC,EAAU,GAAI,CAC/D,MAAMC,EAAU,qCAEhB,GAAI,CAEA,OADiB,MAAMC,EAAM,IAAI,GAAGN,CAAQ,QAAQK,CAAO,MAAM,mBAAmBH,CAAU,CAAC,SAASC,CAAI,aAAaC,CAAO,EAAE,GAClH,KAAK,IACxB,MAAe,CACZ,MAAM,IAAI,MAAM,yCAAyC,CAC5D,CACL,CCfA,MAAeG,EAAA,kDCmBR,SAASC,EAAcC,EAAQ,CACrC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EAAO,IAAI,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAClG;AAAA;AAAA,kCAEgCL,CAAa;AAAA,8CACDD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,wDAGhBC,CAAK;AAAA,wDACLC,CAAK;AAAA,2DACFC,CAAQ;AAAA,4DACPC,CAAS;AAAA;AAAA;AAAA,cAIrE,EAAG,KAAK,EAAE,EAETR,EAAQ,mBAAmB,YAAaC,CAAM,EAG7B,IAAIQ,EAAe,aAAc,CACjD,aAAc,MACd,aAAc,GAChB,CAAE,CAEF,CAEO,SAASC,EAAoBC,EAAS,CAC5CC,EAAS,MAAM,CACd,MAAO,QACP,QAASD,EACT,SAAU,YACV,MAAO,gBACP,MAAO,OACP,gBAAiB,UACjB,aAAc,OACd,SAAU,WACV,QAAS,IACT,QAASE,CACX,CAAE,CACF,CC1CA,MAAMC,EAAa,SAAS,cAAc,cAAc,EACxDA,EAAW,iBAAiB,YAAa,UAAY,CACpDA,EAAW,UAAU,IAAI,cAAc,CACxC,CAAC,EAEDA,EAAW,iBAAiB,WAAY,UAAY,CACnDA,EAAW,UAAU,OAAO,cAAc,CAC3C,CAAC,EAED,IAAItB,EAAa,GACbC,EAAO,EACPsB,EACAC,EAEJ,SAAS,iBAAiB,mBAAoB,IAAM,CACnD,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,aAAa,EAC5ClB,EAAU,SAAS,cAAc,UAAU,EACjDe,EAAc,SAAS,cAAc,WAAW,EAChDC,EAAkB,SAAS,cAAc,eAAe,EACvC,IAAIP,EAAe,aAAc,CACjD,aAAc,MACd,aAAc,GAChB,CAAE,EAGDQ,EAAK,iBAAiB,SAAU,MAAOE,GAAU,CAChDA,EAAM,eAAc,EACpBnB,EAAQ,UAAY,KACpBR,EAAa0B,EAAM,MAAM,OACzB,MAAME,EAAa,SAAS,cAAc,SAAS,EAEnD,GADAA,EAAW,UAAU,IAAI,SAAS,EAC9B5B,IAAe,GAAI,CACtBkB,EAAoB,6BAA6B,EACjD,MACA,CACDjB,EAAO,EACP,MAAM4B,EAAsB,EAC5BD,EAAW,UAAU,OAAO,SAAS,CACvC,CAAE,EAEDL,EAAY,iBAAiB,QAAS,gBAAkB,CACvDtB,IACAsB,EAAY,MAAM,QAAU,OAC5BC,EAAgB,MAAM,QAAU,QAEhC,MAAMM,EAAoBC,IAEtBD,GACH,OAAO,SAAS,CACf,IAAKA,EAAoB,EACzB,SAAU,QACd,CAAI,EAEF,MAAMD,EAAiC,CAEzC,CAAE,EAKDE,GACD,CAAC,EAED,SAASA,GAAY,CACpB,MAAMC,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAIA,EAAa,CAChB,MAAMF,EAAoBE,EAAY,sBAAqB,EAAG,OAAO,EACrE,eAAQ,IAAIF,CAAiB,EACtBA,CACP,CACD,OAAO,IACR,CAIA,eAAeD,GAAyB,CACtC,GAAI,CACF,MAAMtB,EAAS,MAAMR,EAAaC,EAAYC,CAAI,EAC5CgC,EAAY1B,EAAO,UACnB2B,EAAajC,EAAO,GAG1B,GAAIM,EAAO,SAAW,EAAG,CACvBW,EAAoB,0EAA0E,EAC9F,MACD,CAED,GAAIgB,GAAcD,EAAW,CAC3BV,EAAY,MAAM,QAAU,OAC5BL,EAAoB,4DAA4D,EAChF,QAAQ,IAAIX,EAAO,MAAM,EAEzB,MACD,CACDD,EAAcC,CAAM,EAIhBA,EAAO,OAAS,IAClBgB,EAAY,MAAM,QAAU,OAC5BL,EAAoB,4DAA4D,GAGhFK,EAAY,MAAM,QAAU,OAE/B,MAAe,CACdL,EAAoB,gEAAgE,CACxF,QAAY,CACRM,EAAgB,MAAM,QAAU,MAEjC,CACH"}